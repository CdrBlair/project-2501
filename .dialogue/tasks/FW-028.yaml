id: "FW-028"
title: "Problem Domain Traceability Model"
status: COMPLETED
created: "2026-01-21T13:33:37Z"
updated: "2026-01-22T09:20:00Z"
completed: "2026-01-22T09:20:00Z"
type: CAPABILITY
priority: HIGH
description: |
  Design and implement a graph/network model for tracing problem domain elements (theories, requirements, decisions, implementations, tests) and their relationships. Enables queries like 'Is this theory validated?' and 'What supports this decision?'. Storage in .dialogue/context-graph/ as files initially (directory+instance pattern), with potential for other storage backends later. Extends existing context graph schema with traceability edges.
objective: "Graph-based traceability model enabling queries across theories, requirements, implementations, and validations"
rationale: |
  Assessment infrastructure (FW-023) needs an underlying model to make assessments meaningful. Traceability enables answering whether theories are proved, requirements met, and identifying gaps. Spawned from FW-023 discussion.
blocked_by: []
blocks:
  - FW-023  # Assessment infrastructure depends on traceability model
  - FW-031  # Negative edges depend on base traceability
notes: |
  Created 21 January 2026.

  Progress 21 January 2026:
  - Updated schema_context-graph.md with:
    - Traceability edges (VALIDATES, ASSUMES, SATISFIES, SPECIFIES, TESTS, COVERS, DEPENDS_ON)
    - New artifact types (ASSUMPTION, REQUIREMENT, TEST, IMPLEMENTATION)
    - Directory+instance storage pattern (DEC-20260121-133941)
    - Traceability queries and consistency rules
  - Bootstrapped context graph for self-hosting:
    - Created .dialogue/context-graph/ directory structure
    - 31 artifact nodes (THY-*, REF-*, STR-*, F-*, C-*, O-*, I-*, G-*, E-*)
    - 2 actor nodes (human:pidster, ai:claude)
    - 10 edges (authorship and concept relationships)
    - Bootstrap scripts in scripts/ subdirectory
  - Created FW-031 for deferred negative edges (CONTRADICTS, RISKS)

  Progress 22 January 2026:
  - Implemented TMS query scripts:
    - graph-locate.sh: directory lookup (find nodes by keyword/type/status)
    - graph-discover.sh: actor knowledge (CREATED, CONTRIBUTED, OWNS, KNOWS edges)
    - graph-trace.sh: traceability queries (validated, assumptions, satisfies, tests, unvalidated, orphans, deps)
    - graph-invalidate.sh: staleness marking with optional cascade
  - retrieve() already implemented via resolve-reference.sh (pre-existing)
  - Tested pipeline end-to-end with sample traceability edges (ASSUMES, VALIDATES)
  - Updated logging skills (log-decision.sh, log-observation.sh) to create graph nodes
    and CREATED edges automatically — keeps graph in sync going forward
  - Bootstrapped existing logs as graph nodes:
    - Created bootstrap-logs.sh script
    - 95 new nodes + 95 new edges created from historical logs
    - Graph now has 203 nodes, 184 edges
    - discover human:pidster → 70 artifacts
    - discover ai:claude → 99 artifacts

  TMS operations status:
  - locate(): DONE (graph-locate.sh)
  - retrieve(): DONE (resolve-reference.sh)
  - discover(): DONE (graph-discover.sh)
  - invalidate(): DONE (graph-invalidate.sh)
  - route(): DEFERRED — conventions handle allocation
  - refresh(): DEFERRED — would need source-specific logic

  Remaining work (deferred/incremental):
  - Add traceability edges between concepts (2 sample edges exist; more can be added incrementally)
  - Bootstrap task nodes (lower priority — tasks are queryable via resolve-reference)
  - Consider: Should task management skill also create graph nodes?

  Completed 22 January 2026:
  - Core traceability model operational
  - TMS query scripts: locate, discover, trace, invalidate
  - Logging skills auto-create graph nodes
  - Historical logs bootstrapped (203 nodes, 184 edges)
  - Decision: Context graph remains index layer (DEC-20260122-091600)
